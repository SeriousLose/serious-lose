!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.storage=t():e.storage=t()}(self,(function(){return(()=>{"use strict";var e={607:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(206),n=r(o(487)),i=r(o(928)),l=o(912),c=o(66);!function(){if(!window.localStorage)throw new Error("浏览器版本不支持 localStorage");var e=(0,c.getLocalInfo)(),t=(new Date).getTime();Object.keys(e).forEach((function(o){e[o]<=t&&(localStorage.removeItem(o),delete e[o])})),localStorage.setItem(c.recordName,JSON.stringify(e)),(0,a.createMinHeapByLocalInfo)(e)}();var f={get:l.get,save:l.save,remove:l.remove,clear:l.clear,session:{get:i.default.get,save:i.default.save,remove:i.default.remove,clear:i.default.clear},on:n.default.subscribe.bind(n.default),off:n.default.unsubscribe.bind(n.default)};t.default=f},206:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clearHeap=t.insert=t.createMinHeapByLocalInfo=void 0;var a=r(o(487)),n=o(912),i=[],l=0,c=null;function f(){c&&clearTimeout(c);var e=i[0].time;c=setTimeout((function(){var e,t=(e=i[0],l--,i[0]=i.pop(),u(0),e);(0,n.remove)(t.key),a.default.trigger(t.key)}),e)}function u(e){for(;2*e+1<l;){var t=2*e+1;if(i[t+1]&&i[t].time>i[t+1].time&&(t+=1),!(i[e].time>i[t].time))break;s(e,t,i),e=t}}function s(e,t,o){o[t],o[e]=o[t],o[t]=o[e]}t.createMinHeapByLocalInfo=function(e){var t=(new Date).getTime(),o=Object.keys(e).map((function(o){return{key:o,time:e[o]-t}}));0!=o.length?(function(e){i=e,l=e.length;for(var t=Math.floor((l-2)/2);t>=0;)u(t),t--}(o),f()):c&&clearTimeout(c)},t.insert=function(e){i[l]=e,function(e){for(;e>0;){var t=Math.floor((e-1)/2);if(!(i[t].time>i[e].time))break;s(t,e,i),e=t}}(l),l++,f()},t.clearHeap=function(){clearTimeout(c),i=[],l=0}},487:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default={list:{},subscribe:function(e,t){this.list[e]||(this.list[e]=[]),this.list[e].push(t)},trigger:function(e){var t=this.list[e];if(t)for(var o=[].slice.call(arguments,0),r=0;r<t.length;r++)t[r].apply(t,o)},unsubscribe:function(e,t){if(!0!==t){var o=this.list[e];o&&(this.list[e]=o.filter((function(e){return e!==t})))}else this.list[e]=null}}},928:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(e){return sessionStorage.getItem(e)},save:function(e,t){sessionStorage.setItem(e,t)},remove:function(e){sessionStorage.removeItem(e)},clear:function(){sessionStorage.clear()}}},66:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteLocalInfo=t.addLocalInfo=t.getLocalInfo=t.recordName=void 0;var r=o(206);function a(){var e=localStorage.getItem(t.recordName);return e?JSON.parse(e):{}}t.recordName="STORAGE_RECORD",t.getLocalInfo=a,t.addLocalInfo=function(e,o){var n=(new Date).getTime()+o,i=a();void 0===i[e]?(i[e]=n,localStorage.setItem(t.recordName,JSON.stringify(i)),(0,r.insert)({key:e,time:o})):(i[e]=n,localStorage.setItem(t.recordName,JSON.stringify(i)),(0,r.createMinHeapByLocalInfo)(i))},t.deleteLocalInfo=function(e){var o=a();void 0!==o[e]&&(delete o[e],localStorage.setItem(t.recordName,JSON.stringify(o)),(0,r.createMinHeapByLocalInfo)(o))}},912:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.remove=t.save=t.get=void 0;var r=o(206),a=o(66);t.get=function(e){return localStorage.getItem(e)},t.save=function(e,t,o){if(0===o)throw new Error("在存储的时候time不允许设为0");o&&(0,a.addLocalInfo)(e,o),localStorage.setItem(e,t)},t.remove=function(e){(0,a.deleteLocalInfo)(e),localStorage.removeItem(e)},t.clear=function(){(0,r.clearHeap)(),localStorage.clear()}}},t={},o=function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}(607);return o.default})()}));